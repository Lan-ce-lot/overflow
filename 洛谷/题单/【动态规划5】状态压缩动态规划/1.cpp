#include <iostream>
#include <cstdio>
#include <algorithm>

using namespace std;

const int mod = 100000000;
const int N = 1 << 13;
int n, m;
int a[13][13];
int F[13];
//?[i]??????

int f[13][1 << 12 + 5];		
//f[i][j]?[i]?????j???????	????i????i?

bool g[1 << 12 + 5];
//g[i]??i????????

/*
???????2?3?
m = 2, n = 3;
1 1 1
0 1 0
???[1]????F[1] = 111
    ?[2]????F[2] = 010

	1 001    2 010    3 011    4 100
    5 101	 6 110    7 111   
	
    ???i < (1 << n)?,
    i??????? = ??
    ??????????
    
    ???g?0???(1 << n)???????????
*/
int main() {
	scanf("%d %d", &m, &n); 
	
	for (int i = 1; i <= m; i++) {
		for (int j = 1; j <= n; j++) {
			scanf("%d", &a[i][j]);
//            F[i] = (F[i] << 1) + a[i][j];
			F[i] += (a[i][j] << (j - 1));
		}
	}
	
	for (int i = 0; i < (1 << n); i++) 
    	g[i] = (!(i & (i << 1))) && (!(i & (i >> 1)));
	
	
	f[0][0] = 1;
	for (int i = 1; i <= m; i++) {
    //????
    	cout << "*" << i << endl;
		for (int j = 0; j < (1 << n); j++) {
        //???????????
			if (g[j] && ((j & F[i]) == j)) {
				cout << j << ' ';
            //??????????1
            //???j?F[i]??
            //?j?F[i]?????????????
				for (int k = 0; k < (1 << n); k++) {
                //????????
					if ((k & j) == 0) {
                    //??????&?0??????????????????????
						f[i][j] = (f[i][j] + f[i - 1][k]) % mod;
					}
				}
			}
		}puts("");
	}
	int ans = 0;
	for (int i = 0; i < (1 << n); i++) {
		ans = (ans + f[m][i]) % mod;
        //????m?????????????
	}
	printf("%d\n", ans);
	return 0;
}

